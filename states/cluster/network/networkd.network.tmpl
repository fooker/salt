### This file is managed by saltstack - any changes will be overwritten ###

{% import 'cluster/init.sls' as cluster with context -%}

[Match]
Name=cluster-{{ pillar['cluster']['nodes'].index(remote) }}


[Network]
Description=Cluster Link to {{ remote }}

# This tunnel is hardly bound to the external interface
BindCarrier=ext

# No link lokal addressing
LinkLocalAddressing=no

# Don't accept any other addresses
IPv6AcceptRouterAdvertisements=no


[Address]
Address={{ cluster.address_ip4(grains['id']) }}/32


[Route]
Gateway={{ cluster.address_ip4(remote) }}/32
Destination={{ cluster.address_ip4(remote) }}/32


[Address]
Address={{ cluster.address_ip6(grains['id']) }}/128


[Route]
Gateway={{ cluster.address_ip6(remote) }}/128
Destination={{ cluster.address_ip6(remote) }}/128

